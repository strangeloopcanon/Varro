## Varro data and artifacts map (where everything lives)

### A. Training artifacts
- Checkpoints (current run):
  - `training/checkpoints/gspo_NEWRUN/final_model/` (rolling latest)
  - `training/checkpoints/gspo_NEWRUN/final_model_YYYYMMDD/` (dated snapshots)
- Checkpoints (older run):
  - `training/checkpoints/gspo/final_model/` (rolling latest)
  - `training/checkpoints/gspo/final_model_YYYYMMDD/` (dated snapshots)
- Training datasets (night prep outputs):
  - Canonical: `training/gspo_training_YYYYMMDD.json`
  - Alternate set: `training/gspo_training_data_YYYYMMDD.json` (not identical on some days; keep until reconciled)
- Logs and stats:
  - Text logs: `training/logs/*.log` (morning/evening/night/training by date)
  - Summaries: `training/stats/*.json`

### B. Predictions and evaluations
- Daily storage (authoritative, post-fix): `timestamped_storage_NEWRUN/`
  - `YYYYMMDD_headlines.json`
  - `YYYYMMDD_predictions.json`
  - `YYYYMMDD_outcome_tracking.json`
  - `YYYYMMDD_evaluations.json`
- Older baseline run (pre-fix, keep for provenance): `timestamped_storage/`
- Prepared GSPO training inputs per day (from evaluations):
  - `training/gspo_training_YYYYMMDD.json` (see A)

### C. Headlines (daily inputs)
- Collected/loaded via `data_collection/enhanced_rss_collector.py`
- Files: `timestamped_storage_NEWRUN/YYYYMMDD_headlines.json` (fallback: `timestamped_storage/`)
- Sources/config: `config/rss_sources.json`

### D. A/B future-prediction sets (single rollout, horizon-specific)
- Folder: `future_predictions/`
  - `20250811_predictions_AB_BASE_DAY.json`
  - `20250811_predictions_AB_LATEST_DAY.json`
  - `20250811_predictions_AB_BASE_MONTH.json`
  - `20250811_predictions_AB_LATEST_MONTH.json`
  - `20250811_predictions_AB_BASE_YEAR.json`
  - `20250811_predictions_AB_LATEST_YEAR.json`
  - How-to note: `future_predictions/README.md`
- To evaluate later, copy the needed file back to a run dir (example):
  - `export VARRO_RUN_DIR_SUFFIX=AB_LATEST_MONTH`
  - `mkdir -p timestamped_storage_AB_LATEST_MONTH`
  - `cp future_predictions/20250811_predictions_AB_LATEST_MONTH.json timestamped_storage_AB_LATEST_MONTH/20250811_predictions.json`
  - `python run_daily_pipeline.py --mode evening --date 20250811 --override_headlines_date 20250911`

### E. Orchestration scripts
- Full/partial pipeline: `run_daily_pipeline.py`
- Evaluate only: `run_evaluation.py`
- GSPO training (manual/ablation): `run_gspo_training.py`
- Convenience wrappers:
  - `run_next_update.py`, `run_backfill_newrun.py`, `run_override_update.py`
- Model management: `manage_models.py`

### F. Config and prompts
- Prompts: `config/prompt_templates.json` (includes structured prediction prompt)
- Training params: `config/training_config.json`
- RSS sources: `config/rss_sources.json`

### G. Paper and figures
- Draft: `paper/paper_draft.md`
- Figures: `paper/figs/` (regenerated by `paper/scripts/make_figs.py`)

### Notes
- Run isolation: set `VARRO_RUN_DIR_SUFFIX` (e.g., `NEWRUN`, `AB_LATEST_DAY`) to route reads/writes to `timestamped_storage_<SUFFIX>/` with fallback to base headlines.
- The two training dataset families (`gspo_training_*.json` vs `gspo_training_data_*.json`) differ on some days. Keep both until reconciled; prefer the `gspo_training_*.json` schema when possible.

